rules:
  # ì¹´í…Œê³ ë¦¬ 1, 2, 3, 4, 5ëŠ” ì´ì „ê³¼ ë™ì¼í•˜ê²Œ ìœ ì§€
  - id: "EXTERNAL_FILE_REFERENCE"
    description: "ë¦¬ì†ŒìŠ¤(XIB, Storyboard, Plist, Assets) ë˜ëŠ” Obj-C í—¤ë”ì—ì„œ ì§ì ‘ ì°¸ì¡°ë˜ëŠ” ì‹¬ë³¼"
    pattern:
      - find: { target: S }
      - where:
          - "S.isReferencedByExternalFile == true"
  - id: "OS_ENTRY_POINT_MAIN_ATTRIBUTE"
    description: "@main ì†ì„±ì´ ë¶™ì€ ì•±ì˜ ì§„ì…ì  íƒ€ì…"
    pattern:
      - find: { target: S }
      - where:
          - "S.attributes contains '@main'"
  - id: "OS_ENTRY_POINT_DELEGATES"
    description: "AppDelegate, SceneDelegate ë“± OSê°€ ì´ë¦„ìœ¼ë¡œ ì§ì ‘ ì°¸ì¡°í•˜ëŠ” í•µì‹¬ í´ë˜ìŠ¤"
    pattern:
      - find: { target: S }
      - where:
          - "S.name in ['AppDelegate', 'SceneDelegate']"
  - id: "OBJC_ATTRIBUTE"
    description: "@objc ë˜ëŠ” @objcMembers ì†ì„±ìœ¼ë¡œ Objective-C ëŸ°íƒ€ì„ì— ë…¸ì¶œëœ ì‹¬ë³¼"
    pattern:
      - find: { target: S }
      - where:
          - "S.attributes contains_any ['@objc', '@objcMembers']"
  - id: "DYNAMIC_MODIFIER"
    description: "'dynamic' ìˆ˜ì •ìë¡œ ë™ì  ë””ìŠ¤íŒ¨ì¹˜ê°€ ê°•ì œëœ ì‹¬ë³¼"
    pattern:
      - find: { target: S }
      - where:
          - "S.modifiers contains 'dynamic'"
  - id: "UI_CONTROLLER_CLASSES"
    description: "ViewController ë˜ëŠ” NavigationController í´ë˜ìŠ¤ë“¤"
    pattern:
      - find: { target: C }
      - where:
          - "C.kind == 'class'"
          - "C.name contains 'Controller'"
  - id: "UI_VIEW_CLASSES"
    description: "ì´ë¦„ì— 'View'ê°€ í¬í•¨ëœ UI ê´€ë ¨ í´ë˜ìŠ¤ ë° êµ¬ì¡°ì²´"
    pattern:
      - find: { target: C }
      - where:
          - "C.kind in ['class', 'struct']"
          - "C.name contains 'View'"
  - id: "UI_CELL_CLASSES"
    description: "ì´ë¦„ì— 'Cell'ì´ í¬í•¨ëœ UI ê´€ë ¨ í´ë˜ìŠ¤ ë° êµ¬ì¡°ì²´"
    pattern:
      - find: { target: C }
      - where:
          - "C.kind in ['class', 'struct']"
          - "C.name contains 'Cell'"
  - id: "SYSTEM_LIFECYCLE_AND_DELEGATE_METHODS"
    description: "ì‹œìŠ¤í…œì´ ì§ì ‘ í˜¸ì¶œí•˜ëŠ” í•µì‹¬ ìƒëª…ì£¼ê¸°, ìƒì„±/ì†Œë©¸ ë° ë¸ë¦¬ê²Œì´íŠ¸ ë©”ì„œë“œ"
    pattern:
      - find: { target: M }
      - where:
          - "M.kind == 'method'"
          - "M.name in ['init', 'deinit', 'viewDidLoad', 'viewWillAppear', 'viewDidAppear', 'viewWillDisappear', 'viewDidDisappear', 'viewDidLayoutSubviews', 'touchesBegan', 'application', 'scene', 'sceneDidBecomeActive', 'sceneWillResignActive', 'sceneDidEnterBackground', 'sceneWillEnterForeground', 'collectionView', 'textFieldDidEndEditing', 'layoutSubviews', 'prepareForReuse']"
  - id: "COMMON_CONVENTION_PROPERTIES"
    description: "MVVM, RxSwift, UIKit ë“±ì—ì„œ ê´€ë¡€ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” í•µì‹¬ í”„ë¡œí¼í‹° ì´ë¦„"
    pattern:
      - find: { target: P }
      - where:
          - "P.kind == 'property'"
          - "P.name in ['viewModel', 'disposeBag', 'reuseIdentifier', 'cancellable']"
  - id: "STANDARD_PROTOCOL_REQUIREMENTS"
    description: "Identifiable, LocalizedError ë“± í‘œì¤€ í”„ë¡œí† ì½œì´ ìš”êµ¬í•˜ëŠ” í”„ë¡œí¼í‹°"
    pattern:
      - find: { target: P }
      - where:
          - "P.kind == 'property'"
          - "P.name in ['id', 'errorDescription', 'recoverySuggestion', 'description', 'debugDescription', 'rawValue', 'body']"
  - id: "COMMON_CONVENTION_METHODS"
    description: "UseCase, Manager ë“±ì—ì„œ ê´€ë¡€ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” í•µì‹¬ ë©”ì„œë“œ ì´ë¦„"
    pattern:
      - find: { target: M }
      - where:
          - "M.kind == 'method'"
          - "M.name in ['call', 'run', 'next', 'set', 'get', 'post', 'patch', 'delete', 'update', 'load', 'save', 'create', 'remove', 'insert', 'append']"

  # =======================================================================
  # ì¹´í…Œê³ ë¦¬ 6: ë°ì´í„° ì§ë ¬í™” ë° ëª¨ë¸ (ğŸ”¥ ìˆ˜ì •ë¨)
  # =======================================================================
  - id: "CODABLE_WITHOUT_CODINGKEYS"
    description: "CodingKeysê°€ ì—†ëŠ” Codable íƒ€ì…ì˜ í”„ë¡œí¼í‹°"
    pattern:
      - find: { target: P }
      - where:
          - "P.kind == 'property'"
          # [ìˆ˜ì •] ë¶€ëª¨(parent)ì˜ ëª¨ë“  ì¡°ìƒ(superclass) ì¤‘ Codableì„ ì±„íƒí•œ ê²ƒì´ ìˆëŠ”ì§€ ê²€ì‚¬
          - "parent.superclass.name in ['Codable', 'Decodable', 'Encodable']"
          - not_exists:
              - "parent.child.name == 'CodingKeys'"

  # =======================================================================
  # ì¹´í…Œê³ ë¦¬ 7: í…ŒìŠ¤íŠ¸ ê´€ë ¨ ì‹¬ë³¼ (ğŸ”¥ ê·œì¹™ ë¶„ë¦¬ ë° ê°•í™”)
  # =======================================================================
  - id: "TEST_CLASSES"
    description: "XCTestCaseë¥¼ ìƒì†í•˜ê±°ë‚˜ ì´ë¦„ì— 'Tests'ê°€ í¬í•¨ëœ í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤"
    pattern:
      - find: { target: C }
      - where:
          - "C.kind == 'class'"
          - "C.name contains 'Tests'"
          - "C.superclass.name == 'XCTestCase'"

  - id: "TEST_METHODS_BY_PREFIX"
    description: "ì´ë¦„ì´ 'test'ë¡œ ì‹œì‘í•˜ëŠ” í…ŒìŠ¤íŠ¸ ë©”ì„œë“œ"
    pattern:
      - find: { target: M }
      - where:
          - "M.kind == 'method'"
          - "M.name starts_with 'test'"

  - id: "TEST_LIFECYCLE_METHODS"
    description: "setUp, tearDown ë“± XCTest ìƒëª…ì£¼ê¸° ë©”ì„œë“œ"
    pattern:
      - find: { target: M }
      - where:
          - "M.kind == 'method'"
          - "M.name in ['setUp', 'tearDown', 'setUpWithError', 'tearDownWithError']"
          - "parent.superclass.name == 'XCTestCase'"

  # =======================================================================
  # ì¹´í…Œê³ ë¦¬ 8: ë¬¸ë§¥ ê¸°ë°˜ ì¼ë°˜ ì´ë¦„ (ğŸ”¥ ìµœì¢… ê°•í™”)
  # =======================================================================
  - id: "COMMON_UI_PROPERTIES"
    description: "UIViewController ë˜ëŠ” UIView ì„œë¸Œí´ë˜ìŠ¤ ë‚´ì˜ ì¼ë°˜ì ì¸ UI ê´€ë ¨ í”„ë¡œí¼í‹°"
    pattern:
      - find: { target: P }
      - where:
          - "P.kind == 'property'"
          - "P.name in ['delegate', 'dataSource', 'title', 'view', 'window', 'tableView', 'collectionView', 'button', 'imageView', 'titleLabel', 'contentView', 'refreshControl', 'backgroundView', 'header', 'footer']"
          # [ìˆ˜ì •] ë¶€ëª¨(parent)ì˜ ëª¨ë“  ì¡°ìƒ(superclass) ì¤‘ UIKit í•µì‹¬ í´ë˜ìŠ¤ê°€ ìˆëŠ”ì§€ ê²€ì‚¬
          - "parent.superclass.name in ['UIViewController', 'UIView', 'UIResponder', 'UITableViewCell', 'UICollectionViewCell', 'UICollectionReusableView']"