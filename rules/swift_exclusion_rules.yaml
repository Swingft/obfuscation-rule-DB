rules:
  # =======================================================================
  # ì¹´í…Œê³ ë¦¬ 1: ì™¸ë¶€ íŒŒì¼ ë° ë¦¬ì†ŒìŠ¤ ì°¸ì¡°
  # =======================================================================
  - id: "EXTERNAL_FILE_REFERENCE"
    description: "ë¦¬ì†ŒìŠ¤(XIB, Storyboard, Plist, Assets) ë˜ëŠ” Obj-C í—¤ë”ì—ì„œ ì§ì ‘ ì°¸ì¡°ë˜ëŠ” ì‹¬ë³¼"
    reason: "íŒŒì¼ì— ì´ë¦„ì´ ë¬¸ìì—´ë¡œ í•˜ë“œì½”ë”©ë˜ì–´ ìˆì–´, ë³€ê²½ ì‹œ ëŸ°íƒ€ì„ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤."
    pattern:
      - find: { target: S }
      - where:
          - "S.isReferencedByExternalFile == true"

  # =======================================================================
  # ì¹´í…Œê³ ë¦¬ 2: OS ë° ì‹œìŠ¤í…œ ì§„ì…ì 
  # =======================================================================
  - id: "OS_ENTRY_POINT_MAIN_ATTRIBUTE"
    description: "@main ì†ì„±ì´ ë¶™ì€ ì•±ì˜ ì§„ì…ì  íƒ€ì…"
    reason: "ì‹œìŠ¤í…œì´ ì•±ì„ ì‹œì‘í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ì•½ì†ëœ ì‹¬ë³¼ì…ë‹ˆë‹¤."
    pattern:
      - find: { target: S }
      - where:
          - "S.attributes contains '@main'"

  - id: "OS_ENTRY_POINT_DELEGATES"
    description: "AppDelegate, SceneDelegate ë“± OSê°€ ì´ë¦„ìœ¼ë¡œ ì§ì ‘ ì°¸ì¡°í•˜ëŠ” í•µì‹¬ í´ë˜ìŠ¤"
    reason: "Info.plist ë˜ëŠ” ì‹œìŠ¤í…œ í”„ë ˆì„ì›Œí¬ê°€ í´ë˜ìŠ¤ ì´ë¦„ìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤."
    pattern:
      - find: { target: S }
      - where:
          - "S.kind in ['class', 'struct']"
          - "S.name in ['AppDelegate', 'SceneDelegate']"

  # =======================================================================
  # ì¹´í…Œê³ ë¦¬ 3: ëŸ°íƒ€ì„ ì´ë¦„ ì°¸ì¡° (ë¦¬í”Œë ‰ì…˜, Obj-C ëŸ°íƒ€ì„)
  # =======================================================================
  - id: "OBJC_ATTRIBUTE"
    description: "@objc ë˜ëŠ” @objcMembers ì†ì„±ìœ¼ë¡œ Objective-C ëŸ°íƒ€ì„ì— ë…¸ì¶œëœ ì‹¬ë³¼"
    reason: "Selector, KVC ë“±ì´ ë¬¸ìì—´ ì´ë¦„ìœ¼ë¡œ ì‹¬ë³¼ì„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤."
    pattern:
      - find: { target: S }
      - where:
          - "S.attributes contains_any ['@objc', '@objcMembers']"

  - id: "DYNAMIC_MODIFIER"
    description: "'dynamic' ìˆ˜ì •ìë¡œ ë™ì  ë””ìŠ¤íŒ¨ì¹˜ê°€ ê°•ì œëœ ì‹¬ë³¼"
    reason: "ë©”ì„œë“œ ìŠ¤ìœ„ì¦ë§(Swizzling)ì˜ ëŒ€ìƒì´ ë˜ê±°ë‚˜, ëŸ°íƒ€ì„ì„ í†µí•´ í˜¸ì¶œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤."
    pattern:
      - find: { target: S }
      - where:
          - "S.modifiers contains 'dynamic'"

  # =======================================================================
  # ì¹´í…Œê³ ë¦¬ 4: UI ë° ìƒëª…ì£¼ê¸° ê´€ë ¨
  # =======================================================================
  - id: "UI_CONTROLLER_CLASSES"
    description: "ViewController ë˜ëŠ” NavigationController í´ë˜ìŠ¤ë“¤"
    reason: "UI ê´€ë ¨ í´ë˜ìŠ¤ëŠ” Storyboard, XIB ë˜ëŠ” ì½”ë“œì—ì„œ ì´ë¦„ìœ¼ë¡œ ì°¸ì¡°ë  ìœ„í—˜ì´ ë§¤ìš° ë†’ìŠµë‹ˆë‹¤."
    pattern:
      - find: { target: C }
      - where:
          - "C.kind == 'class'"
          - "C.name contains 'Controller'"

  - id: "UI_VIEW_CLASSES"
    description: "ì´ë¦„ì— 'View'ê°€ í¬í•¨ëœ UI ê´€ë ¨ í´ë˜ìŠ¤ ë° êµ¬ì¡°ì²´"
    reason: "UI ê´€ë ¨ í´ë˜ìŠ¤ëŠ” Storyboard, XIB ë˜ëŠ” ì½”ë“œì—ì„œ ì´ë¦„ìœ¼ë¡œ ì°¸ì¡°ë  ìœ„í—˜ì´ ë§¤ìš° ë†’ìŠµë‹ˆë‹¤."
    pattern:
      - find: { target: C }
      - where:
          - "C.kind in ['class', 'struct']"
          - "C.name contains 'View'"

  - id: "UI_CELL_CLASSES"
    description: "ì´ë¦„ì— 'Cell'ì´ í¬í•¨ëœ UI ê´€ë ¨ í´ë˜ìŠ¤ ë° êµ¬ì¡°ì²´"
    reason: "UI ê´€ë ¨ í´ë˜ìŠ¤ëŠ” Storyboard, XIB ë˜ëŠ” ì½”ë“œì—ì„œ ì´ë¦„ìœ¼ë¡œ ì°¸ì¡°ë  ìœ„í—˜ì´ ë§¤ìš° ë†’ìŠµë‹ˆë‹¤."
    pattern:
      - find: { target: C }
      - where:
          - "C.kind in ['class', 'struct']"
          - "C.name contains 'Cell'"

  - id: "SYSTEM_LIFECYCLE_AND_DELEGATE_METHODS"
    description: "ì‹œìŠ¤í…œì´ ì§ì ‘ í˜¸ì¶œí•˜ëŠ” í•µì‹¬ ìƒëª…ì£¼ê¸°, ìƒì„±/ì†Œë©¸ ë° ë¸ë¦¬ê²Œì´íŠ¸ ë©”ì„œë“œ"
    reason: "ì‹œìŠ¤í…œ í”„ë ˆì„ì›Œí¬ê°€ ì•½ì†ëœ ì´ë¦„ìœ¼ë¡œ ì§ì ‘ í˜¸ì¶œí•˜ë¯€ë¡œ ì´ë¦„ì´ ë°”ë€Œë©´ ì•ˆ ë©ë‹ˆë‹¤."
    pattern:
      - find: { target: M }
      - where:
          - "M.kind == 'method'"
          # [ìˆ˜ì •] init, deinit ì¶”ê°€
          - "M.name in ['init', 'deinit', 'viewDidLoad', 'viewWillAppear', 'viewDidAppear', 'viewWillDisappear', 'viewDidDisappear', 'viewDidLayoutSubviews', 'touchesBegan', 'application', 'scene', 'sceneDidBecomeActive', 'sceneWillResignActive', 'sceneDidEnterBackground', 'sceneWillEnterForeground', 'collectionView', 'textFieldDidEndEditing']"

  # =======================================================================
  # ì¹´í…Œê³ ë¦¬ 5: í”„ë ˆì„ì›Œí¬ ê´€ë¡€ ë° í‘œì¤€ í”„ë¡œí† ì½œ
  # =======================================================================
  - id: "COMMON_CONVENTION_PROPERTIES"
    description: "MVVM, RxSwift, UIKit ë“±ì—ì„œ ê´€ë¡€ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” í•µì‹¬ í”„ë¡œí¼í‹° ì´ë¦„"
    reason: "ì´ë¦„ ë³€ê²½ ì‹œ ì½”ë“œ ì „ì²´ì˜ ì•„í‚¤í…ì²˜ ë° ê°€ë…ì„±ì„ í•´ì¹˜ê³ , í”„ë ˆì„ì›Œí¬ ì—°ë™ì— ì‹¤íŒ¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."
    pattern:
      - find: { target: P }
      - where:
          - "P.kind == 'property'"
          - "P.name in ['viewModel', 'disposeBag', 'reuseIdentifier']"

  - id: "STANDARD_PROTOCOL_REQUIREMENTS"
    description: "Identifiable, LocalizedError ë“± í‘œì¤€ í”„ë¡œí† ì½œì´ ìš”êµ¬í•˜ëŠ” í”„ë¡œí¼í‹°"
    reason: "í”„ë¡œí† ì½œì˜ ì•½ì†ëœ ìš”êµ¬ì‚¬í•­ìœ¼ë¡œ, ì´ë¦„ì´ ë°”ë€Œë©´ ê¸°ëŠ¥ì´ ë™ì‘í•˜ì§€ ì•Šê±°ë‚˜ ì»´íŒŒì¼ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤."
    pattern:
      - find: { target: P }
      - where:
          - "P.kind == 'property'"
          - "P.name in ['id', 'errorDescription', 'recoverySuggestion', 'description', 'debugDescription', 'rawValue']"

  - id: "COMMON_CONVENTION_METHODS"
    description: "UseCase, Manager ë“±ì—ì„œ ê´€ë¡€ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” í•µì‹¬ ë©”ì„œë“œ ì´ë¦„"
    reason: "íŠ¹ì • ì•„í‚¤í…ì²˜ íŒ¨í„´(UseCase, Repository ë“±)ì—ì„œ ì•½ì†ëœ ì§„ì…ì  ë©”ì„œë“œì…ë‹ˆë‹¤."
    pattern:
      - find: { target: M }
      - where:
          - "M.kind == 'method'"
          - "M.name in ['call', 'run', 'next', 'set']"

  # =======================================================================
  # ì¹´í…Œê³ ë¦¬ 6: ë°ì´í„° ì§ë ¬í™” ë° ëª¨ë¸ (ğŸ”¥ ìˆ˜ì •ë¨)
  # =======================================================================
  - id: "CODABLE_WITHOUT_CODINGKEYS"
    description: "CodingKeysê°€ ì—†ëŠ” Codable íƒ€ì…ì˜ í”„ë¡œí¼í‹°"
    pattern:
      - find: { target: P }
      - where:
          - "P.kind == 'property'"
          - "P <--CONTAINS-- T"
          # [ìˆ˜ì •] CONFORMS_TOë¥¼ INHERITS_FROMìœ¼ë¡œ ë³€ê²½í•˜ì—¬ ê·¸ë˜í”„ì™€ ì¼ì¹˜ì‹œí‚´
          - "T --INHERITS_FROM--> Proto"
          - "Proto.name in ['Codable', 'Decodable', 'Encodable']"
          - not_exists:
              - "T --CONTAINS-- K"
              - "K.name == 'CodingKeys'"